# ============================================================
# TRAMMO NH3 TRADING DESK — Environment Variables
# ============================================================
# Copy this file to .env for local dev (never commit .env).
# For Fly.io, set each variable with:
#   fly secrets set KEY=value
#   fly secrets set KEY=value KEY2=value2 ...
# Or import a file:
#   fly secrets import < .env
# ============================================================


# ── REQUIRED ────────────────────────────────────────────────

# PostgreSQL connection string.
# Fly provides this automatically when you attach a Postgres cluster:
#   fly postgres attach --app <your-app> <postgres-app-name>
DATABASE_URL=ecto://user:pass@host/database

# Phoenix secret key — MUST be unique and secret in production.
# Generate a new one with: mix phx.gen.secret
SECRET_KEY_BASE=REPLACE_WITH_OUTPUT_OF_mix_phx_gen_secret

# Public hostname of the deployed app (no https://)
# Fly sets this automatically if you use fly deploy, or set it explicitly.
PHX_HOST=your-app-name.fly.dev

# Internal HTTP port (Fly routes HTTPS → this port)
PORT=4111

# DB connection pool size (default: 10)
POOL_SIZE=10


# ── ANTHROPIC / CLAUDE AI ────────────────────────────────────
# Required for scenario analysis, delivery schedule summaries,
# intent mapping, and scenario description improvements.
ANTHROPIC_API_KEY=sk-ant-...


# ── AIS VESSEL TRACKING ──────────────────────────────────────
# Real-time vessel positions via aisstream.io (free tier available).
# Get a key at: https://aisstream.io
AISSTREAM_API_KEY=

# Comma-separated MMSI numbers to limit tracking to specific vessels.
# Leave empty to track all vessels in configured bounding boxes.
# TRACKED_VESSELS=338234567,338987654

# Additional ocean bounding box (lat_tl,lon_tl,lat_br,lon_br).
# Examples:
#   Black Sea:    48.0,28.0,40.9,41.0
#   Persian Gulf: 30.0,48.0,22.0,60.0
# AISSTREAM_EXTRA_BBOX=

# MarineTraffic API (alternative vessel tracking)
# MARINETRAFFIC_API_KEY=

# AISHub API (alternative vessel tracking)
# AISHUB_API_KEY=


# ── SAP INTEGRATION ──────────────────────────────────────────
# SAP REST API (contract positions, scheduling)
SAP_API_BASE=https://sap.trammo.com
SAP_API_USER=
SAP_API_PASS=

# SAP OData service (contract positions feed)
SAP_ODATA_BASE_URL=https://sap.trammo.com
SAP_CLIENT=100

# Internal SAP API (alternative integration path)
# SAP_API_URL=
# SAP_API_KEY=

# Shared secret for the SAP → app webhook (POST /api/sap/ping).
# SAP must include this token in the Authorization header.
SAP_WEBHOOK_TOKEN=


# ── MARKET DATA ──────────────────────────────────────────────
# Argus Media commodity price feed
# ARGUS_API_KEY=
# ARGUS_API_URL=https://api.argusmedia.com/v2

# ICIS commodity price feed
# ICIS_API_KEY=
# ICIS_API_URL=https://api.icis.com/v1

# US Energy Information Administration (natural gas benchmarks)
# EIA_API_KEY=

# St. Louis Fed FRED (macro economic indicators)
# FRED_API_KEY=

# Custom internal market feed
# MARKET_FEED_URL=
# MARKET_FEED_KEY=


# ── BROKER / TMS ─────────────────────────────────────────────
# Broker API (freight, chartering)
# BROKER_API_URL=
# BROKER_API_KEY=

# Transportation Management System
# TMS_URL=
# TMS_API_KEY=

# SCADA / Operations data
# SCADA_API_URL=
# SCADA_API_KEY=


# ── CONTRACTS — MICROSOFT GRAPH / SHAREPOINT ─────────────────
# Azure AD app registration for scanning SharePoint/OneDrive contract files.
# Required for the network scanner and contract ingestion pipeline.
# GRAPH_TENANT_ID=
# GRAPH_CLIENT_ID=
# GRAPH_CLIENT_SECRET=
# GRAPH_DRIVE_ID=

# Local directory for contract file uploads (default: priv/contracts)
# CONTRACT_UPLOAD_DIR=/app/priv/contracts


# ── LLM CONTRACT ANALYSIS ────────────────────────────────────
# OpenAI-compatible endpoint for contract clause extraction/validation.
# Defaults to Anthropic if not set (uses ANTHROPIC_API_KEY above).
# COPILOT_ENDPOINT=
# COPILOT_API_KEY=
# COPILOT_MODEL=claude-sonnet-4-5-20250929
# COPILOT_TIMEOUT=30000

# Alternative LLM endpoint for contract validation
# LLM_ENDPOINT=
# LLM_MODEL=


# ── BLOCKCHAIN (BSV) — OPTIONAL ──────────────────────────────
# Used for immutable audit trail of committed scenarios.
# Leave all blank to disable; the app degrades gracefully.
# WOC_API_KEY=
# BSV_MAPI_URL=https://mapi.gorillapool.io
# BSV_NODE_URL=
# BSV_SERVER_PRIVKEY=
# BSV_ENCRYPTION_KEY=


# ── MISC ─────────────────────────────────────────────────────
# Directory for solver snapshot logs
# SNAPSHOT_LOG_DIR=/app/priv/snapshots

# Internal unified API (Trammo intranet)
# INTERNAL_API_URL=
# INTERNAL_API_KEY=
